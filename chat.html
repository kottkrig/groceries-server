<!doctype html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        function createSocket(nickname) {
            var socket = io.connect();
            console.log('Client is running.');
            socket.on('news', function (data) {
                console.log('News!');
                console.log(data);
                socket.emit('my other event', { my: 'data' });
                console.log('Client emitted my other event');
            });
            socket.on('connect', function() {
                socket.emit('set nickname', nickname);
                console.log('Set nickname to ' + nickname);
            });
            socket.on('ready', function() {
                socket.emit('chat message', 'Hello server!');
            });   
        }
    </script>
    </head>
	<body>
        <textarea id="nickname" rows='1' cols='20'></textarea>
        <button type="button" onclick="createSocket($('textarea#nickname').val())">Set nickname</button> 
	</body>
</html>